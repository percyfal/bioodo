

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; bioodo 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="bioodo 0.1.0 documentation" href="index.html"/>
        <link rel="next" title="&lt;no title&gt;" href="authors.html"/>
        <link rel="prev" title="bioodo - odo parser library for bioinformatics" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> bioodo
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#resource-configuration">Resource configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">bioodo</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bioodo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>To use biodo, import a parsing module for the bioinformatics
application of interest and apply the odo function on a given output
file. The following example uses the star module to parse a star
output log file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bioodo</span> <span class="kn">import</span> <span class="n">star</span><span class="p">,</span> <span class="n">odo</span><span class="p">,</span> <span class="n">DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">odo</span><span class="p">(</span><span class="s2">&quot;/path/to/Log.final.out&quot;</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
<p>odo parses the output file by seamlessly invoking the star resource
function <a class="reference internal" href="bioodo.html#bioodo.star.resource_star_log" title="bioodo.star.resource_star_log"><code class="xref py py-meth docutils literal"><span class="pre">bioodo.star.resource_star_log()</span></code></a> and returns a pandas
DataFrame object.</p>
<p>Output files can also be aggregated with function
<code class="xref py py-func docutils literal"><span class="pre">bioodo.utils.aggregate()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bioodo</span> <span class="kn">import</span> <span class="n">star</span><span class="p">,</span> <span class="n">odo</span><span class="p">,</span> <span class="n">DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">star</span><span class="o">.</span><span class="n">aggregate</span><span class="p">([</span><span class="s1">&#39;/path/to/sample1/Log.final.out&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;/path/to/sample2/Log.final.out&#39;</span><span class="p">],</span>
                     <span class="n">annotate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, two output files will be aggregated. Data provenance is tracked
through the <cite>annotate</cite> option, which will cause the aggregation
function to add an additional column named <cite>uri</cite> in which the uris
themselves will be stored (<cite>/path/to/sample1/Log.final.out</cite> and
<cite>/path/to/sample2/Log.final.out</cite> in this case).</p>
<p>Alternatively, data provenance can be tracked via a custom parsing of
the uri by passing a regex to the <cite>regex</cite> option:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bioodo</span> <span class="kn">import</span> <span class="n">star</span><span class="p">,</span> <span class="n">odo</span><span class="p">,</span> <span class="n">DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">star</span><span class="o">.</span><span class="n">aggregate</span><span class="p">([</span><span class="s1">&#39;/path/to/sample1/Log.final.out&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;/path/to/sample2/Log.final.out&#39;</span><span class="p">],</span>
                     <span class="n">regex</span><span class="o">=</span><span class="s2">&quot;.*/(?P&lt;sample&gt;sample[0-9]+/Log.final.out)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, an additional column <cite>sample</cite> will be added, in which matches to
the regular expression pattern will be stored (<cite>sample1</cite> and <cite>sample2</cite>
in this case).</p>
<p>Finally, data can be pivoted on the fly to convert between wide and
long format. For instance, the following code block will pivot the
data frame to contain observations (sample) in rows and variables
(statistic) in columns.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bioodo</span> <span class="kn">import</span> <span class="n">star</span><span class="p">,</span> <span class="n">odo</span><span class="p">,</span> <span class="n">DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">odo</span><span class="p">(</span><span class="s2">&quot;/path/to/sample1/Log.final.out&quot;</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">,</span>
         <span class="n">regex</span><span class="o">=</span><span class="s2">&quot;.*/(?P&lt;sample&gt;sample[0-9]+)/.*&quot;</span><span class="p">,</span>
         <span class="n">index</span><span class="o">=</span><span class="s2">&quot;sample&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;stastic&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See the docstrings for further examples.</p>
<div class="section" id="resource-configuration">
<h2>Resource configuration<a class="headerlink" href="#resource-configuration" title="Permalink to this headline">¶</a></h2>
<p>New backends are added to odo by applying a decorator
<code class="xref py py-func docutils literal"><span class="pre">resource.register()</span></code> to a function that parses output. The decorator
takes as a mandatory argument a regular expression pattern, and
optionally a priority number that is used to resolve ambiguous
matches:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@resource.register</span><span class="p">(</span><span class="s1">&#39;.*.txt&#39;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">resource_application_command</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parse application_command output file&quot;&quot;&quot;</span>
    <span class="c1"># parsing code follows here</span>
</pre></div>
</div>
<p>In bioodo, the regular expression patterns are actually loaded from
the resource configuration file <cite>bioodo/data/config.yaml</cite> and accessed
via a global config variable
<code class="xref any docutils literal"><span class="pre">bioodo.__init__.__RESOURCE_CONFIG__</span></code>. The configuration consists
of application sections and resource subsections under which pattern
and priority are defined:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">application</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&#39;.*foo|.*bar&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">priority</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
<p>See <cite>bioodo/data/config.yaml</cite> for default settings.</p>
<p>The default configuration can be modified through a user-defined
configuration file named <cite>.bioodo.yaml</cite>, located either in the user
home directory or in the working directory. Consequently, the patterns
and priorities can be configured to suit whatever file naming
convention the user has in mind.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="authors.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="bioodo - odo parser library for bioinformatics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Per Unneberg.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>